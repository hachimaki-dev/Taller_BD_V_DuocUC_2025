<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taller Pr√°ctico: Paquetes en PL/SQL</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --secondary: #10b981;
            --bg: #f8fafc;
            --surface: #ffffff;
            --text: #1e293b;
            --text-light: #64748b;
            --border: #e2e8f0;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .progress-bar {
            background: white;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .progress-bar h3 {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            color: var(--text-light);
        }

        .progress {
            background: var(--border);
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            height: 100%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 0.5rem;
            color: white;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .tabs {
            display: flex;
            gap: 0.5rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: white;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid var(--border);
        }

        .card h2 {
            color: var(--primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card h3 {
            color: var(--text);
            margin: 1.5rem 0 0.75rem;
            font-size: 1.1rem;
        }

        .accordion {
            margin: 1rem 0;
        }

        .accordion-item {
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            overflow: hidden;
        }

        .accordion-header {
            background: var(--bg);
            padding: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            transition: background 0.3s;
        }

        .accordion-header:hover {
            background: var(--border);
        }

        .accordion-header i {
            transition: transform 0.3s;
        }

        .accordion-header.active i {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .accordion-content.active {
            max-height: 2000px;
        }

        .accordion-body {
            padding: 1rem;
        }

        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 1rem 0;
        }

        .code-block .keyword { color: #c792ea; }
        .code-block .string { color: #a5d6ff; }
        .code-block .comment { color: #7c8c9a; font-style: italic; }
        .code-block .function { color: #82aaff; }

        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            display: flex;
            gap: 0.75rem;
            align-items: start;
        }

        .alert i {
            margin-top: 0.2rem;
        }

        .alert-info {
            background: #dbeafe;
            color: #1e40af;
            border-left: 4px solid var(--primary);
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid var(--success);
        }

        .alert-warning {
            background: #fef3c7;
            color: #92400e;
            border-left: 4px solid var(--warning);
        }

        .alert-danger {
            background: #fee2e2;
            color: #991b1b;
            border-left: 4px solid var(--danger);
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            margin: 0.5rem 0;
            background: var(--bg);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox-item:hover {
            background: var(--border);
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: var(--primary);
        }

        .checkbox-item.checked {
            background: #d1fae5;
        }

        .notes-section {
            background: #fffbeb;
            padding: 1rem;
            border-radius: 8px;
            border: 2px dashed var(--warning);
        }

        .notes-section h3 {
            color: var(--warning);
            margin-bottom: 0.75rem;
        }

        .notes-section textarea {
            width: 100%;
            min-height: 120px;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.95rem;
            resize: vertical;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(37,99,235,0.3);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .example-box {
            background: #f0f9ff;
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .example-box strong {
            color: var(--primary);
        }

        .reflection-box {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            border: 2px solid var(--primary);
        }

        .reflection-box h4 {
            color: var(--primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .reflection-question {
            background: white;
            padding: 1rem;
            margin: 0.75rem 0;
            border-radius: 8px;
            border-left: 3px solid var(--secondary);
        }

        .tips-section {
            background: #fef3c7;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .tips-section h4 {
            color: var(--warning);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-light);
            margin-top: 3rem;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.5rem;
            }

            .tabs {
                flex-direction: column;
            }

            .tab-btn {
                width: 100%;
            }

            .code-block {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-box"></i> Taller Pr√°ctico: Paquetes en PL/SQL</h1>
            <p>Aprende a organizar tu c√≥digo con cohesi√≥n, bajo acoplamiento y encapsulaci√≥n</p>
        </div>
    </header>

    <div class="container">
        <div class="progress-bar">
            <h3>Tu Progreso en el Taller</h3>
            <div class="progress">
                <div class="progress-fill" id="progressFill" style="width: 0%">0%</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="openTab('intro')">
                <i class="fas fa-home"></i> Introducci√≥n
            </button>
            <button class="tab-btn" onclick="openTab('sesion1')">
                <i class="fas fa-lightbulb"></i> Sesi√≥n 1: Agrupar con Sentido
            </button>
            <button class="tab-btn" onclick="openTab('sesion2')">
                <i class="fas fa-code"></i> Sesi√≥n 2: Construir y Probar
            </button>
            <button class="tab-btn" onclick="openTab('recursos')">
                <i class="fas fa-book"></i> Recursos
            </button>
        </div>

        <div id="intro" class="tab-content active">
            <div class="card">
                <h2><i class="fas fa-rocket"></i> ¬°Bienvenido al Taller!</h2>
                <p>Este taller te ayudar√° a comprender y aplicar <strong>paquetes en PL/SQL</strong> para organizar tu c√≥digo de manera profesional.</p>

                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>Importante:</strong> Este es un espacio de aprendizaje, no una evaluaci√≥n. El objetivo es experimentar, equivocarse y aprender. No hay una √∫nica soluci√≥n correcta: tu base de datos es √∫nica y tu enfoque puede ser diferente al de tus compa√±eros.
                    </div>
                </div>

                <h3>üéØ ¬øQu√© aprender√°s?</h3>
                <ul style="margin-left: 2rem; margin-top: 0.5rem;">
                    <li><strong>Cohesi√≥n:</strong> Agrupar elementos relacionados</li>
                    <li><strong>Acoplamiento:</strong> Minimizar dependencias innecesarias</li>
                    <li><strong>Encapsulaci√≥n:</strong> Decidir qu√© exponer y qu√© mantener privado</li>
                </ul>

                <h3>üìã Estructura del Taller</h3>
                <div class="example-box">
                    <strong>Sesi√≥n 1 (80 min):</strong> Comprender por qu√© y c√≥mo agrupar procedimientos en paquetes<br>
                    <strong>Sesi√≥n 2 (80 min):</strong> Implementar, probar y refinar tu paquete
                </div>

                <div class="alert alert-success">
                    <i class="fas fa-users"></i>
                    <div>
                        <strong>Trabaja a tu ritmo:</strong> Puedes realizar este taller solo o en pareja. Si trabajas solo, considera consultar con un compa√±ero o usar IA para validar tus ideas.
                    </div>
                </div>

                <h3>üß† Conceptos Fundamentales</h3>
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>¬øQu√© es un Paquete en PL/SQL?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p>Un <strong>paquete</strong> es una estructura que agrupa procedimientos, funciones, variables y tipos relacionados. Piensa en √©l como una "caja organizada" donde guardas herramientas que trabajan juntas.</p>
                                <p><strong>Tiene dos partes:</strong></p>
                                <ul>
                                    <li><strong>Especificaci√≥n (SPEC):</strong> La "interfaz p√∫blica" - lo que otros pueden ver y usar</li>
                                    <li><strong>Cuerpo (BODY):</strong> La "implementaci√≥n privada" - c√≥mo funciona internamente</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>¬øQu√© es la Cohesi√≥n?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p>La <strong>cohesi√≥n</strong> mide qu√© tan relacionados est√°n los elementos dentro de un paquete.</p>
                                <div class="alert alert-success">
                                    <i class="fas fa-check-circle"></i>
                                    <div><strong>Alta cohesi√≥n (bueno):</strong> Todos los procedimientos del paquete "PKG_INVENTARIO" manejan stock, productos y alertas de inventario.</div>
                                </div>
                                <div class="alert alert-danger">
                                    <i class="fas fa-times-circle"></i>
                                    <div><strong>Baja cohesi√≥n (malo):</strong> Un paquete que mezcla gesti√≥n de usuarios, c√°lculos de facturaci√≥n y reportes de ventas.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>¬øQu√© es el Acoplamiento?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p>El <strong>acoplamiento</strong> mide qu√© tan dependiente es un paquete de otros elementos externos.</p>
                                <div class="alert alert-success">
                                    <i class="fas fa-check-circle"></i>
                                    <div><strong>Bajo acoplamiento (bueno):</strong> Tu paquete funciona de manera independiente, solo necesita datos b√°sicos de entrada.</div>
                                </div>
                                <div class="alert alert-danger">
                                    <i class="fas fa-times-circle"></i>
                                    <div><strong>Alto acoplamiento (malo):</strong> Tu paquete depende de variables globales, otros paquetes y estructuras complejas externas.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>¬øQu√© es la Encapsulaci√≥n?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p>La <strong>encapsulaci√≥n</strong> es decidir qu√© partes de tu c√≥digo son p√∫blicas y cu√°les privadas.</p>
                                <p><strong>Regla de oro:</strong> Solo exp√≥n lo necesario. Todo lo dem√°s debe ser privado.</p>
                                <div class="example-box">
                                    <strong>P√∫blico:</strong> Procedimiento "agregar_platillo" que otros pueden llamar<br>
                                    <strong>Privado:</strong> Funci√≥n "validar_ingredientes" que solo usa el paquete internamente
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="sesion1" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-lightbulb"></i> Sesi√≥n 1: Agrupar con Sentido (80 min)</h2>
                <p><strong>Objetivo:</strong> Comprender por qu√© y c√≥mo agrupar procedimientos y funciones en un paquete con alta cohesi√≥n.</p>

                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>
                        <strong>Recuerda:</strong> No busques la perfecci√≥n. Busca entender el "por qu√©" detr√°s de cada decisi√≥n.
                    </div>
                </div>

                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span><i class="fas fa-flask"></i> Lab 1: Analiza un Paquete Mal Dise√±ado (15 min)</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p><strong>Actividad:</strong> Observa el siguiente paquete y reflexiona sobre sus problemas.</p>

                                <div class="code-block">CREATE OR REPLACE PACKAGE pkg_hospital_confuso AS
    <span class="comment">-- Procedimiento para agregar pacientes</span>
    PROCEDURE agregar_paciente(p_nombre VARCHAR2, p_edad NUMBER);
    
    <span class="comment">-- Funci√≥n para calcular total de factura</span>
    FUNCTION calcular_factura(p_id_factura NUMBER) RETURN NUMBER;
    
    <span class="comment">-- Procedimiento para limpiar tablas antiguas</span>
    PROCEDURE limpiar_logs_sistema;
    
    <span class="comment">-- Funci√≥n para enviar email</span>
    PROCEDURE enviar_notificacion(p_email VARCHAR2, p_mensaje VARCHAR2);
END;</div>

                                <div class="reflection-box">
                                    <h4><i class="fas fa-brain"></i> Reflexiona</h4>
                                    <div class="reflection-question">
                                        <strong>1.</strong> ¬øQu√© tienen en com√∫n estos procedimientos y funciones?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>2.</strong> ¬øHay elementos que no deber√≠an estar juntos? ¬øPor qu√©?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>3.</strong> ¬øC√≥mo mejorar√≠as la cohesi√≥n de este paquete?
                                    </div>
                                </div>

                                <div class="tips-section">
                                    <h4><i class="fas fa-lightbulb"></i> ¬øEstancado? Pistas</h4>
                                    <ul>
                                        <li>Un paquete deber√≠a tener un "tema" o "responsabilidad" clara</li>
                                        <li>Preg√∫ntate: "¬øQu√© pasa si elimino uno de estos elementos? ¬øLos dem√°s siguen teniendo sentido juntos?"</li>
                                        <li>Los emails y logs del sistema no tienen relaci√≥n directa con la gesti√≥n de pacientes o facturas</li>
                                    </ul>
                                </div>

                                <div class="notes-section">
                                    <h3><i class="fas fa-pencil-alt"></i> Mis Notas del Lab 1</h3>
                                    <textarea id="notesLab1" placeholder="Escribe aqu√≠ tus reflexiones y observaciones..."></textarea>
                                </div>

                                <label class="checkbox-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" data-lab="lab1">
                                    <span>He completado el Lab 1</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span><i class="fas fa-flask"></i> Lab 2: Identifica Agrupaciones en tu BD (20 min)</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p><strong>Actividad:</strong> Revisa los procedimientos y funciones que ya tienes en tu base de datos.</p>

                                <h4>Paso 1: Haz un inventario</h4>
                                <p>Lista todos los procedimientos, funciones y triggers que tienes. Ejemplo:</p>
                                <div class="example-box">
                                    <strong>Base de datos: Men√∫s Hospitalarios</strong><br>
                                    ‚Ä¢ PROC_INSERTAR_MENU<br>
                                    ‚Ä¢ PROC_ACTUALIZAR_PLATILLO<br>
                                    ‚Ä¢ FUNC_CALCULAR_COSTO_MENU<br>
                                    ‚Ä¢ TRIGGER_AUDITAR_MENU<br>
                                    ‚Ä¢ PROC_ALERTA_STOCK_BAJO
                                </div>

                                <h4>Paso 2: Agrupa por tema</h4>
                                <p>Identifica qu√© elementos podr√≠an ir juntos. Busca patrones como:</p>
                                <ul>
                                    <li><strong>Gesti√≥n de una entidad:</strong> Todo lo relacionado con men√∫s, platillos, pacientes, etc.</li>
                                    <li><strong>Operaciones similares:</strong> Reportes, auditor√≠as, c√°lculos financieros</li>
                                    <li><strong>Flujos de trabajo:</strong> Proceso completo de una transacci√≥n</li>
                                </ul>

                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle"></i>
                                    <div>
                                        <strong>Ejemplos de agrupaciones v√°lidas:</strong><br>
                                        ‚Ä¢ PKG_GESTION_MENUS: crear, modificar, eliminar men√∫s<br>
                                        ‚Ä¢ PKG_INVENTARIO: alertas de stock, actualizar cantidades, reportes<br>
                                        ‚Ä¢ PKG_REPORTES: generar reportes de ventas, consumo, costos
                                    </div>
                                </div>

                                <div class="tips-section">
                                    <h4><i class="fas fa-lightbulb"></i> ¬øEstancado? Preguntas gu√≠a</h4>
                                    <ul>
                                        <li>¬øQu√© entidades principales tiene mi BD? (ej: men√∫s, platillos, ingredientes)</li>
                                        <li>¬øQu√© operaciones realizo frecuentemente juntas?</li>
                                        <li>Si tuviera que explicar mi sistema a alguien, ¬øen qu√© "m√≥dulos" lo dividir√≠a?</li>
                                    </ul>
                                </div>

                                <div class="notes-section">
                                    <h3><i class="fas fa-pencil-alt"></i> Mis Agrupaciones Propuestas</h3>
                                    <textarea id="notesLab2" placeholder="Paquete 1: [nombre]
Incluye: [lista de procedimientos/funciones]
Raz√≥n: [por qu√© van juntos]

Paquete 2: ..."></textarea>
                                </div>

                                <label class="checkbox-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" data-lab="lab2">
                                    <span>He completado el Lab 2</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span><i class="fas fa-flask"></i> Lab 3: Dise√±a la Especificaci√≥n de tu Primer Paquete (25 min)</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p><strong>Actividad:</strong> Elige UNA agrupaci√≥n del Lab 2 y crea su especificaci√≥n (SPEC).</p>

                                <h4>Estructura b√°sica de un SPEC</h4>
                                <div class="code-block">CREATE OR REPLACE PACKAGE nombre_paquete AS
    <span class="comment">-- Solo lo que quieres que sea p√∫blico</span>
    
    PROCEDURE nombre_procedimiento(parametros);
    
    FUNCTION nombre_funcion(parametros) RETURN tipo;
    
    <span class="comment">-- Variables globales p√∫blicas (√∫salas con cuidado)</span>
    variable_global tipo;
END nombre_paquete;</div>

                                <h4>Ejemplo: Paquete de Gesti√≥n de Men√∫s</h4>
                                <div class="code-block">CREATE OR REPLACE PACKAGE pkg_gestion_menus AS
    <span class="comment">-- Procedimientos p√∫blicos para gestionar men√∫s</span>
    PROCEDURE crear_menu(p_nombre VARCHAR2);
    
    PROCEDURE agregar_platillo_a_menu(
        p_id_menu NUMBER, 
        p_id_platillo NUMBER
    );
    
    FUNCTION obtener_costo_menu(p_id_menu NUMBER) RETURN NUMBER;
    
    PROCEDURE eliminar_menu(p_id_menu NUMBER);
END pkg_gestion_menus;</div>

                                <div class="alert alert-warning">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <div>
                                        <strong>Reglas importantes:</strong><br>
                                        ‚Ä¢ Solo incluye lo que DEBE ser accesible desde fuera<br>
                                        ‚Ä¢ Usa nombres descriptivos y consistentes<br>
                                        ‚Ä¢ Agrupa operaciones relacionadas con la misma entidad o proceso
                                    </div>
                                </div>

                                <div class="reflection-box">
                                    <h4><i class="fas fa-brain"></i> Documenta tus Decisiones</h4>
                                    <div class="reflection-question">
                                        <strong>1.</strong> ¬øPor qu√© elegiste este paquete como tu primero?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>2.</strong> ¬øQu√© tienen en com√∫n todos los elementos que incluiste?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>3.</strong> ¬øHay algo que dejaste fuera? ¬øPor qu√©?
                                    </div>
                                </div>

                                <div class="tips-section">
                                    <h4><i class="fas fa-lightbulb"></i> ¬øEstancado? Preguntas gu√≠a</h4>
                                    <ul>
                                        <li>Empieza con 3-5 procedimientos/funciones relacionados</li>
                                        <li>Si dudas entre incluir algo, preg√∫ntate: "¬øEsta operaci√≥n tiene sentido SIN las otras?"</li>
                                        <li>No incluyas en el SPEC elementos que solo necesitas internamente</li>
                                    </ul>
                                </div>

                                <div class="notes-section">
                                    <h3><i class="fas fa-pencil-alt"></i> Mi Especificaci√≥n (SPEC)</h3>
                                    <textarea id="notesLab3" placeholder="Escribe aqu√≠ tu c√≥digo CREATE OR REPLACE PACKAGE..."></textarea>
                                </div>

                                <label class="checkbox-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" data-lab="lab3">
                                    <span>He completado el Lab 3</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span><i class="fas fa-flask"></i> Lab 4: Reflexi√≥n Final de Sesi√≥n 1 (20 min)</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p><strong>Actividad:</strong> Comparte y valida tu dise√±o con un compa√±ero o mediante autoevaluaci√≥n.</p>

                                <h4>Opci√≥n A: Revisi√≥n con Compa√±ero</h4>
                                <p>Intercambia tu especificaci√≥n con un compa√±ero y respondan estas preguntas sobre el dise√±o del otro:</p>
                                <div class="example-box">
                                    ‚úì ¬øPuedo entender qu√© hace el paquete solo leyendo su nombre?<br>
                                    ‚úì ¬øLos procedimientos/funciones tienen algo en com√∫n claro?<br>
                                    ‚úì ¬øHay algo que parece no encajar?<br>
                                    ‚úì ¬øQu√© sugiero mejorar?
                                </div>

                                <h4>Opci√≥n B: Autoevaluaci√≥n / Consulta con IA</h4>
                                <p>Usa estas preguntas para evaluar tu propio dise√±o o consultar con ChatGPT:</p>
                                <div class="alert alert-info">
                                    <i class="fas fa-robot"></i>
                                    <div>
                                        <strong>Prompt sugerido para IA:</strong><br>
                                        "Tengo este paquete PL/SQL. ¬øLa agrupaci√≥n tiene sentido? ¬øLos elementos tienen alta cohesi√≥n? ¬øQu√© mejorar√≠as?"<br>
                                        [pega tu SPEC aqu√≠]
                                    </div>
                                </div>

                                <div class="reflection-box">
                                    <h4><i class="fas fa-brain"></i> Reflexi√≥n Final</h4>
                                    <div class="reflection-question">
                                        <strong>1.</strong> ¬øQu√© problemas resuelve mi paquete que antes no estaban resueltos?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>2.</strong> ¬øMi paquete tiene alta cohesi√≥n? ¬øPor qu√© s√≠ o por qu√© no?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>3.</strong> ¬øQu√© aprend√≠ sobre c√≥mo organizar c√≥digo en esta sesi√≥n?
                                    </div>
                                </div>

                                <div class="notes-section">
                                    <h3><i class="fas fa-pencil-alt"></i> Feedback Recibido y Ajustes</h3>
                                    <textarea id="notesLab4" placeholder="¬øQu√© feedback recibiste? ¬øQu√© vas a ajustar para la Sesi√≥n 2?"></textarea>
                                </div>

                                <label class="checkbox-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" data-lab="lab4">
                                    <span>He completado el Lab 4</span>
                                </label>

                                <div class="alert alert-success" style="margin-top: 1.5rem;">
                                    <i class="fas fa-trophy"></i>
                                    <div>
                                        <strong>¬°Excelente trabajo!</strong> Has completado la Sesi√≥n 1. Ahora comprendes qu√© es cohesi√≥n y c√≥mo dise√±ar la estructura de un paquete. En la Sesi√≥n 2, implementar√°s el cuerpo y lo probar√°s.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="sesion2" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-code"></i> Sesi√≥n 2: Construir y Probar (80 min)</h2>
                <p><strong>Objetivo:</strong> Implementar, probar y refinar un paquete con buena cohesi√≥n, bajo acoplamiento y encapsulaci√≥n adecuada.</p>

                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>Punto de partida:</strong> Ya tienes tu especificaci√≥n (SPEC) de la Sesi√≥n 1. Ahora crear√°s el cuerpo (BODY) y lo pondr√°s a prueba.
                    </div>
                </div>

                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span><i class="fas fa-flask"></i> Lab 5: Implementa el Cuerpo del Paquete (25 min)</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p><strong>Actividad:</strong> Crea el BODY de tu paquete, implementando la l√≥gica de cada procedimiento y funci√≥n.</p>

                                <h4>Estructura del BODY</h4>
                                <div class="code-block">CREATE OR REPLACE PACKAGE BODY nombre_paquete AS
    
    <span class="comment">-- Puedes declarar elementos PRIVADOS aqu√≠</span>
    <span class="comment">-- (funciones, procedimientos o variables que solo usa el paquete)</span>
    
    FUNCTION validacion_interna(param tipo) RETURN BOOLEAN AS
    BEGIN
        <span class="comment">-- L√≥gica privada</span>
        RETURN TRUE;
    END;
    
    <span class="comment">-- Ahora implementa los elementos p√∫blicos del SPEC</span>
    
    PROCEDURE nombre_procedimiento(parametros) AS
    BEGIN
        <span class="comment">-- Implementaci√≥n</span>
    END;
    
    FUNCTION nombre_funcion(parametros) RETURN tipo AS
    BEGIN
        <span class="comment">-- Implementaci√≥n</span>
        RETURN valor;
    END;
    
END nombre_paquete;</div>

                                <h4>Ejemplo Completo: PKG_GESTION_MENUS</h4>
                                <div class="code-block">CREATE OR REPLACE PACKAGE BODY pkg_gestion_menus AS
    
    <span class="comment">-- Funci√≥n PRIVADA para validar que un men√∫ existe</span>
    FUNCTION menu_existe(p_id_menu NUMBER) RETURN BOOLEAN AS
        v_count NUMBER;
    BEGIN
        SELECT COUNT(*) INTO v_count 
        FROM MENUS WHERE id = p_id_menu;
        RETURN v_count > 0;
    END;
    
    <span class="comment">-- Implementaci√≥n de procedimientos p√∫blicos</span>
    
    PROCEDURE crear_menu(p_nombre VARCHAR2) AS
    BEGIN
        INSERT INTO MENUS (id, nombre) 
        VALUES (SEQ_MENU.NEXTVAL, p_nombre);
        COMMIT;
        DBMS_OUTPUT.PUT_LINE('Men√∫ creado: ' || p_nombre);
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
            RAISE_APPLICATION_ERROR(-20001, 'Error al crear men√∫');
    END;
    
    PROCEDURE agregar_platillo_a_menu(
        p_id_menu NUMBER, 
        p_id_platillo NUMBER
    ) AS
    BEGIN
        <span class="comment">-- Usa la funci√≥n privada</span>
        IF NOT menu_existe(p_id_menu) THEN
            RAISE_APPLICATION_ERROR(-20002, 'El men√∫ no existe');
        END IF;
        
        INSERT INTO MENU_PLATILLOS (id_menu, id_platillo)
        VALUES (p_id_menu, p_id_platillo);
        COMMIT;
    END;
    
    FUNCTION obtener_costo_menu(p_id_menu NUMBER) RETURN NUMBER AS
        v_costo NUMBER := 0;
    BEGIN
        SELECT SUM(si.cantidad * si.precio_unitario)
        INTO v_costo
        FROM MENU_PLATILLOS mp
        JOIN INGREDIENTES_PLATILLOS ip ON mp.id_platillo = ip.id_platillo
        JOIN STOCK_INGREDIENTES si ON ip.id_ingrediente = si.id_ingrediente
        WHERE mp.id_menu = p_id_menu;
        
        RETURN NVL(v_costo, 0);
    END;
    
    PROCEDURE eliminar_menu(p_id_menu NUMBER) AS
    BEGIN
        DELETE FROM MENU_PLATILLOS WHERE id_menu = p_id_menu;
        DELETE FROM MENUS WHERE id = p_id_menu;
        COMMIT;
    END;
    
END pkg_gestion_menus;</div>

                                <div class="alert alert-warning">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <div>
                                        <strong>Puntos clave de encapsulaci√≥n:</strong><br>
                                        ‚Ä¢ <code>menu_existe</code> es PRIVADA (solo est√° en el BODY, no en el SPEC)<br>
                                        ‚Ä¢ Los procedimientos p√∫blicos pueden usar las funciones privadas<br>
                                        ‚Ä¢ Manejo de errores con EXCEPTION en cada operaci√≥n cr√≠tica
                                    </div>
                                </div>

                                <div class="tips-section">
                                    <h4><i class="fas fa-lightbulb"></i> ¬øEstancado? Preguntas gu√≠a</h4>
                                    <ul>
                                        <li>¬øQu√© validaciones necesito que sean privadas?</li>
                                        <li>¬øHay l√≥gica repetida que pueda extraer a una funci√≥n privada?</li>
                                        <li>¬øEstoy manejando excepciones apropiadamente?</li>
                                        <li>¬øMi c√≥digo es reutilizable o est√° muy acoplado a casos espec√≠ficos?</li>
                                    </ul>
                                </div>

                                <div class="notes-section">
                                    <h3><i class="fas fa-pencil-alt"></i> Mi Implementaci√≥n (BODY)</h3>
                                    <textarea id="notesLab5" placeholder="Escribe aqu√≠ tu c√≥digo CREATE OR REPLACE PACKAGE BODY..."></textarea>
                                </div>

                                <label class="checkbox-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" data-lab="lab5">
                                    <span>He completado el Lab 5</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span><i class="fas fa-flask"></i> Lab 6: Revisa y Mejora con Feedback (15 min)</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p><strong>Actividad:</strong> Revisa tu c√≥digo con un compa√±ero o usa IA para identificar mejoras.</p>

                                <h4>Checklist de Revisi√≥n</h4>
                                <div class="example-box">
                                    <strong>Cohesi√≥n:</strong><br>
                                    ‚òê Todos los elementos del paquete est√°n relacionados<br>
                                    ‚òê El nombre del paquete describe claramente su prop√≥sito<br><br>
                                    
                                    <strong>Acoplamiento:</strong><br>
                                    ‚òê El paquete no depende excesivamente de otros paquetes<br>
                                    ‚òê Las dependencias externas son m√≠nimas y claras<br><br>
                                    
                                    <strong>Encapsulaci√≥n:</strong><br>
                                    ‚òê Solo lo necesario est√° en el SPEC (p√∫blico)<br>
                                    ‚òê Las validaciones y l√≥gica auxiliar est√°n en el BODY (privado)<br>
                                    ‚òê No expongo variables globales innecesariamente<br><br>
                                    
                                    <strong>Calidad del C√≥digo:</strong><br>
                                    ‚òê Manejo excepciones apropiadamente<br>
                                    ‚òê Los nombres son descriptivos<br>
                                    ‚òê Incluyo comentarios donde es necesario
                                </div>

                                <h4>Preguntas para Revisi√≥n entre Pares</h4>
                                <div class="reflection-box">
                                    <h4><i class="fas fa-users"></i> Intercambio con Compa√±ero</h4>
                                    <div class="reflection-question">
                                        <strong>1.</strong> ¬øEntiendes qu√© hace cada procedimiento leyendo solo su nombre?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>2.</strong> ¬øHay algo que deber√≠a ser privado pero est√° p√∫blico (o viceversa)?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>3.</strong> ¬øEl paquete tiene dependencias complejas o innecesarias?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>4.</strong> ¬øQu√© mejorar√≠as del dise√±o?
                                    </div>
                                </div>

                                <div class="alert alert-info">
                                    <i class="fas fa-robot"></i>
                                    <div>
                                        <strong>Prompt para IA:</strong><br>
                                        "Revisa este paquete PL/SQL. Eval√∫a: (1) cohesi√≥n, (2) acoplamiento, (3) encapsulaci√≥n. ¬øQu√© elementos deber√≠an ser privados? ¬øHay dependencias innecesarias?"<br>
                                        [pega tu c√≥digo completo]
                                    </div>
                                </div>

                                <div class="notes-section">
                                    <h3><i class="fas fa-pencil-alt"></i> Feedback y Mejoras Identificadas</h3>
                                    <textarea id="notesLab6" placeholder="¬øQu√© mejoras te sugirieron? ¬øQu√© cambios realizar√°s?"></textarea>
                                </div>

                                <label class="checkbox-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" data-lab="lab6">
                                    <span>He completado el Lab 6</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span><i class="fas fa-flask"></i> Lab 7: Prueba con Datos Reales (25 min)</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p><strong>Actividad:</strong> Ejecuta tu paquete con datos de tu base de datos y documenta los resultados.</p>

                                <h4>Plan de Pruebas</h4>
                                <p>Crea bloques PL/SQL an√≥nimos para probar cada procedimiento y funci√≥n:</p>

                                <div class="code-block">BEGIN
    <span class="comment">-- Prueba 1: Crear un nuevo men√∫</span>
    pkg_gestion_menus.crear_menu('Men√∫ Diab√©tico');
    DBMS_OUTPUT.PUT_LINE('‚úì Men√∫ creado exitosamente');
    
    <span class="comment">-- Prueba 2: Agregar platillos al men√∫</span>
    pkg_gestion_menus.agregar_platillo_a_menu(1, 10);
    pkg_gestion_menus.agregar_platillo_a_menu(1, 11);
    DBMS_OUTPUT.PUT_LINE('‚úì Platillos agregados');
    
    <span class="comment">-- Prueba 3: Calcular costo</span>
    DECLARE
        v_costo NUMBER;
    BEGIN
        v_costo := pkg_gestion_menus.obtener_costo_menu(1);
        DBMS_OUTPUT.PUT_LINE('Costo del men√∫:  || v_costo);
    END;
    
    <span class="comment">-- Prueba 4: Caso de error (men√∫ inexistente)</span>
    BEGIN
        pkg_gestion_menus.agregar_platillo_a_menu(999, 10);
    EXCEPTION
        WHEN OTHERS THEN
            DBMS_OUTPUT.PUT_LINE('‚úì Error manejado correctamente: ' || SQLERRM);
    END;
END;</div>

                                <h4>Casos de Prueba Sugeridos</h4>
                                <div class="example-box">
                                    <strong>1. Caso Exitoso:</strong> Operaci√≥n normal con datos v√°lidos<br>
                                    <strong>2. Caso L√≠mite:</strong> Valores m√≠nimos, m√°ximos o especiales<br>
                                    <strong>3. Caso de Error:</strong> Datos inv√°lidos para verificar manejo de excepciones<br>
                                    <strong>4. Caso Complejo:</strong> M√∫ltiples operaciones en secuencia
                                </div>

                                <div class="tips-section">
                                    <h4><i class="fas fa-lightbulb"></i> ¬øEstancado? Preguntas gu√≠a</h4>
                                    <ul>
                                        <li>¬øQu√© escenarios reales puede enfrentar mi paquete?</li>
                                        <li>¬øQu√© pasa si los datos de entrada son incorrectos o nulos?</li>
                                        <li>¬øLas excepciones se manejan de forma clara y √∫til?</li>
                                        <li>¬øLos procedimientos funcionan tanto solos como en combinaci√≥n?</li>
                                    </ul>
                                </div>

                                <div class="notes-section">
                                    <h3><i class="fas fa-pencil-alt"></i> Resultados de las Pruebas</h3>
                                    <textarea id="notesLab7" placeholder="Documenta:
- Qu√© probaste
- Qu√© funcion√≥ correctamente
- Qu√© errores encontraste
- Qu√© ajustes realizaste"></textarea>
                                </div>

                                <label class="checkbox-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" data-lab="lab7">
                                    <span>He completado el Lab 7</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span><i class="fas fa-flask"></i> Lab 8: Reflexi√≥n Final del Taller (15 min)</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p><strong>Actividad:</strong> Reflexiona sobre todo el proceso de aprendizaje y consolida tus conocimientos.</p>

                                <div class="reflection-box">
                                    <h4><i class="fas fa-brain"></i> Reflexi√≥n Final</h4>
                                    <div class="reflection-question">
                                        <strong>1.</strong> ¬øCu√°ndo es apropiado usar un paquete en lugar de procedimientos sueltos?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>2.</strong> ¬øQu√© ventajas concretas observaste al agrupar tu c√≥digo en un paquete?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>3.</strong> ¬øC√≥mo decidiste qu√© hacer p√∫blico y qu√© privado?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>4.</strong> ¬øQu√© fue lo m√°s desafiante del taller? ¬øC√≥mo lo resolviste?
                                    </div>
                                    <div class="reflection-question">
                                        <strong>5.</strong> ¬øQu√© otros paquetes podr√≠as crear para tu base de datos?
                                    </div>
                                </div>

                                <h4>Conexi√≥n con Conceptos Clave</h4>
                                <div class="alert alert-success">
                                    <i class="fas fa-check-circle"></i>
                                    <div>
                                        <strong>Cohesi√≥n:</strong> Aprendiste a agrupar elementos relacionados que "pertenecen juntos" y tienen un prop√≥sito com√∫n.
                                    </div>
                                </div>
                                <div class="alert alert-success">
                                    <i class="fas fa-check-circle"></i>
                                    <div>
                                        <strong>Acoplamiento:</strong> Minimizaste dependencias innecesarias, haciendo que tu paquete sea m√°s independiente y reutilizable.
                                    </div>
                                </div>
                                <div class="alert alert-success">
                                    <i class="fas fa-check-circle"></i>
                                    <div>
                                        <strong>Encapsulaci√≥n:</strong> Distinguiste entre interfaz p√∫blica (SPEC) e implementaci√≥n privada (BODY), exponiendo solo lo necesario.
                                    </div>
                                </div>

                                <h4>Pr√≥ximos Pasos</h4>
                                <div class="example-box">
                                    <strong>Para seguir aprendiendo:</strong><br>
                                    ‚Ä¢ Crea un segundo paquete complementario a este<br>
                                    ‚Ä¢ Explora c√≥mo un paquete puede llamar a otro (acoplamiento controlado)<br>
                                    ‚Ä¢ Investiga sobre variables globales en paquetes y cu√°ndo usarlas<br>
                                    ‚Ä¢ Documenta tus paquetes con comentarios estilo JavaDoc
                                </div>

                                <div class="notes-section">
                                    <h3><i class="fas fa-pencil-alt"></i> Mis Aprendizajes Clave</h3>
                                    <textarea id="notesLab8" placeholder="Resume en tus propias palabras:
- Lo m√°s importante que aprendiste
- Conceptos que ahora entiendes mejor
- Dudas que a√∫n tienes
- Ideas para aplicar en tu proyecto"></textarea>
                                </div>

                                <label class="checkbox-item" onclick="toggleCheck(this)">
                                    <input type="checkbox" data-lab="lab8">
                                    <span>He completado el Lab 8</span>
                                </label>

                                <div class="alert alert-success" style="margin-top: 1.5rem;">
                                    <i class="fas fa-trophy"></i>
                                    <div>
                                        <strong>¬°Felicitaciones!</strong> Has completado el taller completo de Paquetes en PL/SQL. Ahora tienes las herramientas para organizar tu c√≥digo con profesionalismo, aplicando cohesi√≥n, bajo acoplamiento y encapsulaci√≥n.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="recursos" class="tab-content">
            <div class="card">
                <h2><i class="fas fa-book"></i> Recursos de Apoyo</h2>
                
                <h3>üìö Referencia R√°pida: Sintaxis de Paquetes</h3>
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Estructura B√°sica de un Paquete</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <div class="code-block"><span class="comment">-- ESPECIFICACI√ìN (SPEC) - Lo p√∫blico</span>
CREATE OR REPLACE PACKAGE nombre_pkg AS
    <span class="comment">-- Variables p√∫blicas (usar con moderaci√≥n)</span>
    variable_publica TIPO;
    
    <span class="comment">-- Procedimientos p√∫blicos</span>
    PROCEDURE proc_publico(parametros);
    
    <span class="comment">-- Funciones p√∫blicas</span>
    FUNCTION func_publica(parametros) RETURN tipo;
END nombre_pkg;
/

<span class="comment">-- CUERPO (BODY) - La implementaci√≥n</span>
CREATE OR REPLACE PACKAGE BODY nombre_pkg AS
    
    <span class="comment">-- Variables privadas (solo visibles dentro del paquete)</span>
    variable_privada TIPO;
    
    <span class="comment">-- Procedimientos/funciones privadas</span>
    FUNCTION validacion_privada RETURN BOOLEAN AS
    BEGIN
        RETURN TRUE;
    END;
    
    <span class="comment">-- Implementaci√≥n de elementos p√∫blicos</span>
    PROCEDURE proc_publico(parametros) AS
    BEGIN
        <span class="comment">-- L√≥gica aqu√≠</span>
    END;
    
    FUNCTION func_publica(parametros) RETURN tipo AS
    BEGIN
        RETURN valor;
    END;
    
END nombre_pkg;
/</div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>C√≥mo Llamar a un Paquete</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <div class="code-block"><span class="comment">-- Llamar a un procedimiento del paquete</span>
BEGIN
    nombre_pkg.proc_publico(parametros);
END;
/

<span class="comment">-- Usar una funci√≥n del paquete</span>
DECLARE
    resultado TIPO;
BEGIN
    resultado := nombre_pkg.func_publica(parametros);
    DBMS_OUTPUT.PUT_LINE('Resultado: ' || resultado);
END;
/

<span class="comment">-- Acceder a variables p√∫blicas</span>
BEGIN
    nombre_pkg.variable_publica := valor;
END;
/</div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Manejo de Excepciones en Paquetes</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <div class="code-block">PROCEDURE mi_procedimiento(param TIPO) AS
BEGIN
    <span class="comment">-- L√≥gica normal</span>
    INSERT INTO tabla VALUES (param);
    COMMIT;
    
EXCEPTION
    WHEN DUP_VAL_ON_INDEX THEN
        ROLLBACK;
        RAISE_APPLICATION_ERROR(-20001, 'Valor duplicado');
    WHEN NO_DATA_FOUND THEN
        RAISE_APPLICATION_ERROR(-20002, 'Datos no encontrados');
    WHEN OTHERS THEN
        ROLLBACK;
        RAISE_APPLICATION_ERROR(-20999, 'Error: ' || SQLERRM);
END;</div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3>üí° Patrones Comunes de Paquetes</h3>
                <div class="example-box">
                    <strong>1. Paquete de Gesti√≥n de Entidad:</strong><br>
                    PKG_GESTION_CLIENTES ‚Üí crear, modificar, eliminar, consultar clientes<br><br>
                    
                    <strong>2. Paquete de Operaciones de Negocio:</strong><br>
                    PKG_VENTAS ‚Üí procesar venta, calcular descuento, generar factura<br><br>
                    
                    <strong>3. Paquete de Reportes:</strong><br>
                    PKG_REPORTES ‚Üí reporte ventas mensual, top productos, inventario bajo<br><br>
                    
                    <strong>4. Paquete de Utilidades:</strong><br>
                    PKG_UTILS ‚Üí validaciones comunes, formateo, conversiones
                </div>

                <h3>üéØ Checklist de Calidad para Paquetes</h3>
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Verificaci√≥n de Cohesi√≥n</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <ul>
                                    <li>‚òê Todos los elementos trabajan con la misma entidad o proceso</li>
                                    <li>‚òê El nombre del paquete describe claramente su prop√≥sito</li>
                                    <li>‚òê Si elimino un elemento, los dem√°s siguen teniendo sentido juntos</li>
                                    <li>‚òê No mezclo diferentes √°reas de responsabilidad</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Verificaci√≥n de Acoplamiento</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <ul>
                                    <li>‚òê El paquete puede funcionar de manera relativamente independiente</li>
                                    <li>‚òê Las dependencias externas son claras y justificadas</li>
                                    <li>‚òê No dependo excesivamente de variables globales externas</li>
                                    <li>‚òê Los par√°metros de entrada/salida son simples y bien definidos</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>Verificaci√≥n de Encapsulaci√≥n</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <ul>
                                    <li>‚òê Solo lo necesario est√° en el SPEC (p√∫blico)</li>
                                    <li>‚òê Las validaciones y funciones auxiliares son privadas</li>
                                    <li>‚òê No expongo detalles de implementaci√≥n innecesarios</li>
                                    <li>‚òê Los usuarios del paquete no necesitan conocer su l√≥gica interna</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <h3>‚ùì Preguntas Frecuentes</h3>
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>¬øCu√°ndo usar un paquete vs procedimientos sueltos?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <div class="alert alert-success">
                                    <i class="fas fa-check"></i>
                                    <div>
                                        <strong>Usa un paquete cuando:</strong><br>
                                        ‚Ä¢ Tienes m√∫ltiples procedimientos/funciones relacionados<br>
                                        ‚Ä¢ Necesitas compartir variables o estado entre procedimientos<br>
                                        ‚Ä¢ Quieres ocultar l√≥gica de implementaci√≥n (privada)<br>
                                        ‚Ä¢ Necesitas organizar c√≥digo complejo de manera profesional
                                    </div>
                                </div>
                                <div class="alert alert-warning">
                                    <i class="fas fa-info-circle"></i>
                                    <div>
                                        <strong>Usa procedimientos sueltos cuando:</strong><br>
                                        ‚Ä¢ Es una operaci√≥n √∫nica y simple<br>
                                        ‚Ä¢ No tiene relaci√≥n l√≥gica con otros procedimientos<br>
                                        ‚Ä¢ Es temporal o experimental
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>¬øPuedo tener variables globales en un paquete?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p><strong>S√≠, pero con cuidado.</strong> Las variables declaradas en el SPEC son p√∫blicas y persisten durante toda la sesi√≥n.</p>
                                <div class="code-block">CREATE OR REPLACE PACKAGE pkg_config AS
    <span class="comment">-- Variable p√∫blica (usar con precauci√≥n)</span>
    g_modo_debug BOOLEAN := FALSE;
    
    PROCEDURE activar_debug;
END;</div>
                                <div class="alert alert-warning">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <div>
                                        <strong>Precauci√≥n:</strong> Las variables globales pueden causar efectos secundarios dif√≠ciles de rastrear. √ösalas solo para configuraci√≥n o estado que realmente necesite ser compartido.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>¬øC√≥mo depuro un paquete?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p><strong>T√©cnicas √∫tiles:</strong></p>
                                <div class="code-block"><span class="comment">-- 1. Usa DBMS_OUTPUT para mensajes</span>
DBMS_OUTPUT.PUT_LINE('Valor de x: ' || x);

<span class="comment">-- 2. Registra en una tabla de auditor√≠a</span>
INSERT INTO log_debug VALUES (SYSDATE, 'pkg_ventas', 'Inicio proceso');

<span class="comment">-- 3. Usa excepciones con mensajes claros</span>
RAISE_APPLICATION_ERROR(-20001, 'Error en paso X: ' || SQLERRM);

<span class="comment">-- 4. Habilita SERVEROUTPUT</span>
SET SERVEROUTPUT ON;</div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            <span>¬øPuedo modificar un paquete sin romper el c√≥digo existente?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body">
                                <p><strong>Depende de qu√© modifiques:</strong></p>
                                <div class="alert alert-success">
                                    <i class="fas fa-check"></i>
                                    <div>
                                        <strong>Cambios seguros (no rompen compatibilidad):</strong><br>
                                        ‚Ä¢ Agregar nuevos procedimientos/funciones al SPEC<br>
                                        ‚Ä¢ Modificar el BODY sin cambiar las firmas p√∫blicas<br>
                                        ‚Ä¢ Agregar elementos privados en el BODY
                                    </div>
                                </div>
                                <div class="alert alert-danger">
                                    <i class="fas fa-times"></i>
                                    <div>
                                        <strong>Cambios que rompen compatibilidad:</strong><br>
                                        ‚Ä¢ Cambiar par√°metros de procedimientos p√∫blicos<br>
                                        ‚Ä¢ Eliminar elementos del SPEC<br>
                                        ‚Ä¢ Cambiar tipos de retorno de funciones p√∫blicas
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3>üîó Enlaces √ötiles</h3>
                <div class="alert alert-info">
                    <i class="fas fa-link"></i>
                    <div>
                        <strong>Documentaci√≥n Oficial Oracle:</strong><br>
                        ‚Ä¢ <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/lnpls/plsql-packages.html" target="_blank">PL/SQL Packages (Oracle 19c)</a><br>
                        ‚Ä¢ <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/lnpls/CREATE-PACKAGE-statement.html" target="_blank">CREATE PACKAGE Statement</a><br>
                        ‚Ä¢ <a href="https://docs.oracle.com/en/database/oracle/oracle-database/19/lnpls/CREATE-PACKAGE-BODY-statement.html" target="_blank">CREATE PACKAGE BODY Statement</a>
                    </div>
                </div>

                <h3>üìù Plantilla Base para tu Paquete</h3>
                <div class="code-block"><span class="comment">-- ============================================
-- PLANTILLA DE PAQUETE PL/SQL
-- Autor: [Tu nombre]
-- Fecha: [Fecha]
-- Descripci√≥n: [Qu√© hace este paquete]
-- ============================================</span>

<span class="comment">-- ESPECIFICACI√ìN</span>
CREATE OR REPLACE PACKAGE pkg_nombre AS
    
    <span class="comment">-- Constantes p√∫blicas (opcional)</span>
    c_constante CONSTANT VARCHAR2(20) := 'VALOR';
    
    <span class="comment">-- Procedimientos p√∫blicos</span>
    PROCEDURE operacion1(
        p_param1 IN tipo,
        p_param2 OUT tipo
    );
    
    <span class="comment">-- Funciones p√∫blicas</span>
    FUNCTION consulta1(p_id NUMBER) RETURN tipo;
    
END pkg_nombre;
/

<span class="comment">-- CUERPO</span>
CREATE OR REPLACE PACKAGE BODY pkg_nombre AS
    
    <span class="comment">-- Variables privadas</span>
    v_privada tipo;
    
    <span class="comment">-- Funciones privadas</span>
    FUNCTION validar(p_dato tipo) RETURN BOOLEAN AS
    BEGIN
        <span class="comment">-- L√≥gica de validaci√≥n</span>
        RETURN TRUE;
    END validar;
    
    <span class="comment">-- Implementaci√≥n de elementos p√∫blicos</span>
    PROCEDURE operacion1(
        p_param1 IN tipo,
        p_param2 OUT tipo
    ) AS
    BEGIN
        <span class="comment">-- Validaciones</span>
        IF NOT validar(p_param1) THEN
            RAISE_APPLICATION_ERROR(-20001, 'Datos inv√°lidos');
        END IF;
        
        <span class="comment">-- L√≥gica principal</span>
        <span class="comment">-- ...</span>
        
        COMMIT;
    EXCEPTION
        WHEN OTHERS THEN
            ROLLBACK;
            RAISE;
    END operacion1;
    
    FUNCTION consulta1(p_id NUMBER) RETURN tipo AS
        v_resultado tipo;
    BEGIN
        SELECT campo INTO v_resultado
        FROM tabla
        WHERE id = p_id;
        
        RETURN v_resultado;
    EXCEPTION
        WHEN NO_DATA_FOUND THEN
            RETURN NULL;
        WHEN OTHERS THEN
            RAISE;
    END consulta1;
    
END pkg_nombre;
/</div>
            </div>
        </div>
    </div>

    <footer>
        <p><i class="fas fa-graduation-cap"></i> Taller Pr√°ctico de Paquetes en PL/SQL</p>
        <p>Dise√±ado para aprender haciendo, experimentando y reflexionando</p>
    </footer>

    <script>
        // Funcionalidad de pesta√±as
        function openTab(tabName) {
            const contents = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-btn');
            
            contents.forEach(content => content.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Funcionalidad de acorde√≥n
        function toggleAccordion(header) {
            const content = header.nextElementSibling;
            const isActive = header.classList.contains('active');
            
            // Cerrar todos los dem√°s
            document.querySelectorAll('.accordion-header').forEach(h => {
                h.classList.remove('active');
                h.nextElementSibling.classList.remove('active');
            });
            
            // Abrir el clickeado si no estaba activo
            if (!isActive) {
                header.classList.add('active');
                content.classList.add('active');
            }
        }

        // Funcionalidad de checkboxes
        function toggleCheck(item) {
            const checkbox = item.querySelector('input[type="checkbox"]');
            
            setTimeout(() => {
                if (checkbox.checked) {
                    item.classList.add('checked');
                } else {
                    item.classList.remove('checked');
                }
                updateProgress();
                saveProgress();
            }, 0);
        }

        // Actualizar barra de progreso
        function updateProgress() {
            const total = document.querySelectorAll('input[type="checkbox"]').length;
            const checked = document.querySelectorAll('input[type="checkbox"]:checked').length;
            const percentage = Math.round((checked / total) * 100);
            
            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = percentage + '%';
            progressFill.textContent = percentage + '%';
        }

        // Guardar progreso en localStorage
        function saveProgress() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const progress = {};
            
            checkboxes.forEach(cb => {
                const lab = cb.dataset.lab;
                progress[lab] = cb.checked;
            });
            
            localStorage.setItem('plsqlProgress', JSON.stringify(progress));
            
            // Guardar notas
            for (let i = 1; i <= 8; i++) {
                const noteArea = document.getElementById('notesLab' + i);
                if (noteArea) {
                    localStorage.setItem('notes_lab' + i, noteArea.value);
                }
            }
        }

        // Cargar progreso desde localStorage
        function loadProgress() {
            const saved = localStorage.getItem('plsqlProgress');
            if (saved) {
                const progress = JSON.parse(saved);
                
                Object.keys(progress).forEach(lab => {
                    const checkbox = document.querySelector(`input[data-lab="${lab}"]`);
                    if (checkbox) {
                        checkbox.checked = progress[lab];
                        if (progress[lab]) {
                            checkbox.closest('.checkbox-item').classList.add('checked');
                        }
                    }
                });
            }
            
            // Cargar notas
            for (let i = 1; i <= 8; i++) {
                const noteArea = document.getElementById('notesLab' + i);
                if (noteArea) {
                    const savedNote = localStorage.getItem('notes_lab' + i);
                    if (savedNote) {
                        noteArea.value = savedNote;
                    }
                    
                    // Guardar autom√°ticamente al escribir
                    noteArea.addEventListener('input', saveProgress);
                }
            }
            
            updateProgress();
        }

        // Cargar todo al iniciar
        document.addEventListener('DOMContentLoaded', () => {
            loadProgress();
            
            // Agregar eventos a los checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                cb.addEventListener('change', () => {
                    updateProgress();
                    saveProgress();
                });
            });
        });

        // Abrir primer acorde√≥n de cada secci√≥n autom√°ticamente
        document.addEventListener('DOMContentLoaded', () => {
            const firstAccordions = document.querySelectorAll('.tab-content .accordion-item:first-child .accordion-header');
            // No abrimos autom√°ticamente para dar m√°s control al usuario
        });
    </script>
</body>
</html>